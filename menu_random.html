<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2685.3">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; -webkit-text-stroke: #000000}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; -webkit-text-stroke: #000000; min-height: 14.0px}
    span.s1 {font-kerning: none}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!doctype html&gt;</span></p>
<p class="p1"><span class="s1">&lt;html lang="es"&gt;</span></p>
<p class="p1"><span class="s1">&lt;head&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>&lt;meta charset="utf-8" /&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1" /&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>&lt;title&gt;MenÃº semanal (ProteÃ­na + Complementos)&lt;/title&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>&lt;style&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>:root{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>--bg:#0b0f0d;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>--card:#0f1713;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>--text:#c8ffe0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>--muted:#7bd3a3;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>--accent:#00ff66;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>--border: rgba(0,255,102,.22);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>--shadow: 0 12px 40px rgba(0,0,0,.45);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>--mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>--sans: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>html,body{height:100%; margin:0; background:radial-gradient(1200px 700px at 20% 0%, rgba(0,255,102,.08), transparent 55%) , var(--bg); color:var(--text);}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.wrap{min-height:100%; display:flex; align-items:center; justify-content:center; padding:20px;}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.card{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>width:min(980px, 100%);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>background:linear-gradient(180deg, rgba(0,255,102,.06), transparent 35%), var(--card);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>border:1px solid var(--border);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>border-radius:20px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>box-shadow: var(--shadow);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>padding:18px 18px 14px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>header{display:flex; gap:14px; align-items:flex-start; justify-content:space-between; flex-wrap:wrap;}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>h1{margin:0; font-family:var(--sans); font-size:20px; letter-spacing:.2px;}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.sub{margin:6px 0 0; color:var(--muted); font-family:var(--sans); font-size:13px; line-height:1.4;}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.badge{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>font-family:var(--mono);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>font-size:12px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>color:var(--accent);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>border:1px solid var(--border);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>padding:8px 10px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>border-radius:999px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>background:rgba(0,255,102,.04);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>white-space:nowrap;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.grid{display:grid; grid-template-columns: 1fr; gap:14px; margin-top:14px;}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>@media (min-width: 900px){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>.grid{grid-template-columns: 1.2fr .8fr;}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.panel{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>border:1px solid rgba(255,255,255,.06);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>border-radius:16px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>padding:14px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>background:rgba(255,255,255,.02);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.panel h2{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>margin:0 0 10px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>font-family:var(--sans);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>font-size:15px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>color:#eafff4;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.menuText{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>font-family:var(--mono);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>font-size:13px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>line-height:1.55;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>white-space:pre-wrap;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>word-break:break-word;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>padding:12px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>border-radius:12px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>border:1px dashed rgba(0,255,102,.22);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>background:rgba(0,0,0,.25);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>min-height: 320px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.btnRow{display:flex; flex-wrap:wrap; gap:10px; margin-top:12px;}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>button, a.btn{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>appearance:none;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>border:1px solid rgba(0,255,102,.28);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>background:rgba(0,255,102,.06);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>color:var(--text);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>border-radius:12px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>padding:10px 12px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>cursor:pointer;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>font-family:var(--sans);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>font-size:13px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>text-decoration:none;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>display:inline-flex;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>align-items:center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>gap:8px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>button:hover, a.btn:hover{background:rgba(0,255,102,.10);}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>button:active, a.btn:active{transform: translateY(1px);}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.ghost{border-color: rgba(255,255,255,.10); background: rgba(255,255,255,.03);}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.danger{border-color: rgba(255,80,80,.35); background: rgba(255,80,80,.06);}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.ok{color: var(--accent);}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.small{font-size:12px; color:var(--muted); font-family:var(--sans); margin-top:8px;}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.list{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>font-family:var(--sans);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>font-size:13px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>color:#dfffee;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>line-height:1.5;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.list code{font-family:var(--mono); color:var(--accent); font-size:12px;}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.pill{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>display:inline-flex; align-items:center; gap:8px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>border:1px solid rgba(255,255,255,.08);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>border-radius:999px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>padding:6px 10px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>font-family:var(--mono);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>font-size:12px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>color:#dfffee;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>background:rgba(255,255,255,.03);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>margin:4px 6px 0 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>&lt;/style&gt;</span></p>
<p class="p1"><span class="s1">&lt;/head&gt;</span></p>
<p class="p1"><span class="s1">&lt;body&gt;</span></p>
<p class="p1"><span class="s1">&lt;div class="wrap"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>&lt;div class="card"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>&lt;header&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>&lt;div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;h1&gt;MenÃº semanal automÃ¡tico&lt;/h1&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;p class="sub"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>Genera 3 combinaciones: &lt;b&gt;Lunes-Martes&lt;/b&gt;, &lt;b&gt;MiÃ©rcoles-Jueves&lt;/b&gt;, &lt;b&gt;Viernes&lt;/b&gt;.</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>Cada combinaciÃ³n = &lt;b&gt;1 proteÃ­na&lt;/b&gt; + &lt;b&gt;2 complementos&lt;/b&gt;. Se guarda toda la semana.</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>&lt;div class="badge" id="weekBadge"&gt;Semana: â€”&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>&lt;/header&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>&lt;div class="grid"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>&lt;section class="panel"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;h2&gt;MenÃº generado&lt;/h2&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div class="menuText" id="menuBox"&gt;Cargandoâ€¦&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div class="btnRow"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;button id="btnGenerate"&gt;âš¡ Generar menÃº&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;button id="btnRedoAll"&gt;ğŸ” Rehacer TODO&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;button id="btnRedoLM" class="ghost"&gt;â†» Rehacer Lunes-Martes&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;button id="btnRedoMJ" class="ghost"&gt;â†» Rehacer MiÃ©rcoles-Jueves&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;button id="btnRedoV" class="ghost"&gt;â†» Rehacer Viernes&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div class="btnRow"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;button id="btnCopy" class="ghost"&gt;ğŸ“‹ Copiar&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;a id="btnWhats" class="btn" target="_blank" rel="noopener"&gt;ğŸ’¬ Mandar por WhatsApp&lt;/a&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;button id="btnDownload" class="ghost"&gt;â¬‡ï¸ Descargar .txt&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;button id="btnReset" class="danger"&gt;ğŸ§¹ Olvidar menÃº guardado&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div class="small" id="status"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>&lt;/section&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>&lt;aside class="panel"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;h2&gt;Reglas activas&lt;/h2&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div class="list"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;div class="pill"&gt;ğŸ”’ Persistente por semana&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;div class="pill"&gt;ğŸ—“ï¸ Desde sÃ¡bado: siguiente semana&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;div class="pill"&gt;ğŸ¥© 1 proteÃ­na&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;div class="pill"&gt;ğŸ¥¦ 2 complementos&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;div class="pill"&gt;ğŸ“Œ Rehacer por bloque&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;p class="small"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>Nota: â€œGenerar menÃºâ€ solo crea si aÃºn no existe para esa semana objetivo. Para cambiarlo usa â€œRehacerâ€¦â€.</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>&lt;/aside&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1">&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;script&gt;</span></p>
<p class="p1"><span class="s1">// =====================</span></p>
<p class="p1"><span class="s1">//<span class="Apple-converted-space">Â  </span>LISTAS (tuyas)</span></p>
<p class="p1"><span class="s1">// =====================</span></p>
<p class="p1"><span class="s1">const PROTEINS = [</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>// Pollo</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Pollo asado",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Pollo a la plancha",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Pollo en salsa verde",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Pollo con salsa de soya y limÃ³n",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Pollo al gratÃ­n con chorizo",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Pollo al gratÃ­n",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Fajitas de pollo asadas",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Tinga de pollo",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>// Pechuga de pollo</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Pechuga de pollo asada",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Pechuga de pollo a la plancha",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Pechuga de pollo encebollada",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>// Res</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Entrecot",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Picadillo de res",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"AlbÃ³ndigas de res",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"SalpicÃ³n de res",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>// Cerdo</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Cerdo en salsa verde",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>// Pescado / Mariscos</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"SalmÃ³n asado",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Ceviche de atÃºn",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"MedallÃ³n de atÃºn",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"AtÃºn tipo bacalao",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>// Otras</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Tortitas de papa con atÃºn",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Pastel de papa con queso y jamÃ³n"</span></p>
<p class="p1"><span class="s1">];</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">const SIDES = [</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>// Sopas / Cremas</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Sopa de fideo",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Sopa de verduras",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Sopa aguada",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Sopa de tortilla",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Crema de verdura",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>// Carbohidratos</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Arroz",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Arroz integral",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Quinoa",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Spaghetti blanco",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Spaghetti al ajo",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Pasta",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>// Leguminosas</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Lentejas",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Frijoles de la olla",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Alubias guisadas",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>// Papas</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Papas asadas",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Papas al horno",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"PurÃ© de papa",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>// Verduras / Ensaladas</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Ensalada verde",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Ensalada de lechuga",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Ensalada de lechuga con espinaca",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Ensalada de nopales",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Ensalada de jitomate",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Ensalada de jitomate con lechuga",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Verduras al vapor",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Verduras asadas",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Verduras salteadas",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Verduras crudas",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Ensalada con aguacate",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Ensalada verde con semillas",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>"Guacamole"</span></p>
<p class="p1"><span class="s1">];</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">// =====================</span></p>
<p class="p1"><span class="s1">//<span class="Apple-converted-space">Â  </span>CONFIG</span></p>
<p class="p1"><span class="s1">// =====================</span></p>
<p class="p1"><span class="s1">const STORAGE_KEY = "menu_week_blocks_v2";</span></p>
<p class="p1"><span class="s1">const BLOCKS = [</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>{ key: "LM", title: "Lunes y Martes" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>{ key: "MJ", title: "MiÃ©rcoles y Jueves" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>{ key: "V",<span class="Apple-converted-space">Â  </span>title: "Viernes" }</span></p>
<p class="p1"><span class="s1">];</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">// =====================</span></p>
<p class="p1"><span class="s1">//<span class="Apple-converted-space">Â  </span>DOM</span></p>
<p class="p1"><span class="s1">// =====================</span></p>
<p class="p1"><span class="s1">const els = {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>weekBadge: document.getElementById("weekBadge"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>menuBox: document.getElementById("menuBox"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>status: document.getElementById("status"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>btnGenerate: document.getElementById("btnGenerate"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>btnRedoAll: document.getElementById("btnRedoAll"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>btnRedoLM: document.getElementById("btnRedoLM"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>btnRedoMJ: document.getElementById("btnRedoMJ"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>btnRedoV: document.getElementById("btnRedoV"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>btnCopy: document.getElementById("btnCopy"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>btnWhats: document.getElementById("btnWhats"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>btnDownload: document.getElementById("btnDownload"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>btnReset: document.getElementById("btnReset"),</span></p>
<p class="p1"><span class="s1">};</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">// =====================</span></p>
<p class="p1"><span class="s1">//<span class="Apple-converted-space">Â  </span>Utils</span></p>
<p class="p1"><span class="s1">// =====================</span></p>
<p class="p1"><span class="s1">function pad2(n){ return String(n).padStart(2,'0'); }</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function isoWeekInfo(date = new Date()){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const d = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const dayNum = d.getUTCDay() || 7; // 1..7</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>d.setUTCDate(d.getUTCDate() + 4 - dayNum);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const yearStart = new Date(Date.UTC(d.getUTCFullYear(),0,1));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const weekNo = Math.ceil((((d - yearStart) / 86400000) + 1) / 7);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>return { year: d.getUTCFullYear(), week: weekNo };</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">// SÃ¡bado = 6 (getDay: Dom=0..Sab=6). Regla: sÃ¡bado ya permite generar "siguiente semana"</span></p>
<p class="p1"><span class="s1">function targetWeekInfo(now = new Date()){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const day = now.getDay();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const base = new Date(now);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>if(day === 6){ // sÃ¡bado</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>base.setDate(base.getDate() + 7);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>return isoWeekInfo(base);</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function setStatus(msg, ok=false){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>els.status.textContent = msg;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>els.status.className = "small " + (ok ? "ok" : "");</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function seededRng(seed){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>// LCG determinÃ­stico</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>let x = seed &gt;&gt;&gt; 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>return function(){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>x = (1664525 * x + 1013904223) &gt;&gt;&gt; 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>return x / 4294967296; // 0..1</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>};</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function pickOne(arr, rng){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>return arr[Math.floor(rng() * arr.length)];</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function pickTwoDistinct(arr, rng){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>if(arr.length &lt; 2) throw new Error("SIDES necesita &gt;= 2 elementos");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const a = pickOne(arr, rng);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>let b = pickOne(arr, rng);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>let guard = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>while(b === a &amp;&amp; guard++ &lt; 20){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>b = pickOne(arr, rng);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>if(a === b){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>// fallback sÃºper seguro</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const idxA = arr.indexOf(a);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const idxB = (idxA + 1) % arr.length;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>b = arr[idxB];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>return [a,b];</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function comboToText(blockTitle, combo){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>return `${blockTitle}:\nğŸ—/ğŸ¥© ${combo.protein}\nğŸ¥¦ ${combo.sides[0]}\nğŸ¥¦ ${combo.sides[1]}\n`;</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function formatMenuText(meta, data){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const lines = [];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>lines.push(`MENÃš â€” Semana objetivo ISO ${meta.week} / ${meta.year}`);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>lines.push(`(Se mantiene fijo durante la semana. Desde sÃ¡bado: ya puedes generar el de la siguiente.)`);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>lines.push("â€”".repeat(46));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>for(const b of BLOCKS){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const c = data.blocks[b.key];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>if(c){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>lines.push(comboToText(b.title, c));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>return lines.join("\n").trim();</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function render(meta, data){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>els.weekBadge.textContent = `Semana objetivo: ${meta.week} (${meta.year})`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const text = formatMenuText(meta, data);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>els.menuBox.textContent = text;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>els.btnWhats.href = `https://wa.me/?text=${encodeURIComponent(text)}`;</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">// =====================</span></p>
<p class="p1"><span class="s1">//<span class="Apple-converted-space">Â  </span>Storage</span></p>
<p class="p1"><span class="s1">// =====================</span></p>
<p class="p1"><span class="s1">function loadSaved(){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>try{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const raw = localStorage.getItem(STORAGE_KEY);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>if(!raw) return null;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>return JSON.parse(raw);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>}catch{ return null; }</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function save(meta, blocks){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const obj = { meta, blocks, at: Date.now() };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>localStorage.setItem(STORAGE_KEY, JSON.stringify(obj));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>return obj;</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function isSameMeta(a,b){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>return a &amp;&amp; b &amp;&amp; a.week === b.week &amp;&amp; a.year === b.year;</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">// =====================</span></p>
<p class="p1"><span class="s1">//<span class="Apple-converted-space">Â  </span>Generator (por bloque)</span></p>
<p class="p1"><span class="s1">// =====================</span></p>
<p class="p1"><span class="s1">function makeSeed(meta, blockKey, extraSalt=0){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>// Seed estable por semana y bloque (si no hay extraSalt)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const base = meta.year * 1000 + meta.week;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const bk = blockKey.split("").reduce((s,ch)=&gt;s+ch.charCodeAt(0),0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>return (base * 31 + bk * 997 + extraSalt) &gt;&gt;&gt; 0;</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function generateBlock(meta, blockKey, extraSalt=0){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const rng = seededRng(makeSeed(meta, blockKey, extraSalt));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const protein = pickOne(PROTEINS, rng);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const sides = pickTwoDistinct(SIDES, rng);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>return { protein, sides };</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function generateAllBlocks(meta, extraSalt=0){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const blocks = {};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>for(const b of BLOCKS){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>blocks[b.key] = generateBlock(meta, b.key, extraSalt);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>return blocks;</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">// =====================</span></p>
<p class="p1"><span class="s1">//<span class="Apple-converted-space">Â  </span>Logic: Semana objetivo + reglas</span></p>
<p class="p1"><span class="s1">// =====================</span></p>
<p class="p1"><span class="s1">function currentTargetMeta(){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>return targetWeekInfo(new Date());</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function ensureMenuLoaded(){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const meta = currentTargetMeta();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const saved = loadSaved();</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>if(saved &amp;&amp; isSameMeta(saved.meta, meta) &amp;&amp; saved.blocks){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>render(meta, saved);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>setStatus("Cargado menÃº guardado para la semana objetivo.", true);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>return;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>// No existe para la semana objetivo: mostrar estado y esperar botÃ³n "Generar"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>render(meta, { blocks: {} });</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>els.menuBox.textContent =</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>`No hay menÃº guardado para la semana objetivo (${meta.week}/${meta.year}).\n` +</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>`Pulsa "Generar menÃº" para crearlo.\n\n` +</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>`Regla: de lunes a viernes, una vez creado se mantiene. En sÃ¡bado ya genera para la siguiente semana.`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>setStatus("Listo para generar menÃº nuevo.", false);</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">// =====================</span></p>
<p class="p1"><span class="s1">//<span class="Apple-converted-space">Â  </span>Actions</span></p>
<p class="p1"><span class="s1">// =====================</span></p>
<p class="p1"><span class="s1">function canGenerateNewForTargetWeek(){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const meta = currentTargetMeta();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const saved = loadSaved();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>return !(saved &amp;&amp; isSameMeta(saved.meta, meta) &amp;&amp; saved.blocks &amp;&amp; Object.keys(saved.blocks).length);</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function actionGenerateIfEmpty(){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const meta = currentTargetMeta();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const saved = loadSaved();</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>if(saved &amp;&amp; isSameMeta(saved.meta, meta) &amp;&amp; saved.blocks &amp;&amp; Object.keys(saved.blocks).length){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>render(meta, saved);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>setStatus("Ya existe un menÃº para esta semana objetivo. Usa 'Rehacer...' si quieres cambiarlo.", false);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>return;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const blocks = generateAllBlocks(meta, /*extraSalt*/ 0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const obj = save(meta, blocks);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>render(meta, obj);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>setStatus("MenÃº generado y guardado âœ…", true);</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function actionRedoAll(){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const meta = currentTargetMeta();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const saved = loadSaved();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const prevSalt = (saved &amp;&amp; isSameMeta(saved.meta, meta) &amp;&amp; saved.at) ? saved.at : Date.now();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>// extraSalt cambia el resultado aunque sea misma semana</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const blocks = generateAllBlocks(meta, prevSalt &amp; 0xffffffff);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const obj = save(meta, blocks);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>render(meta, obj);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>setStatus("MenÃº COMPLETO rehecho y guardado âœ…", true);</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function actionRedoBlock(blockKey){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const meta = currentTargetMeta();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const saved = loadSaved();</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>// si no hay saved para semana objetivo, primero creamos el resto base para no quedar incompleto</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>let blocks = (saved &amp;&amp; isSameMeta(saved.meta, meta) &amp;&amp; saved.blocks) ? {...saved.blocks} : generateAllBlocks(meta, 0);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const salt = Date.now() &amp; 0xffffffff;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>blocks[blockKey] = generateBlock(meta, blockKey, salt);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const obj = save(meta, blocks);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>render(meta, obj);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const title = BLOCKS.find(b =&gt; b.key === blockKey)?.title || blockKey;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>setStatus(`Bloque "${title}" rehecho y guardado âœ…`, true);</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">async function copyToClipboard(){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const text = els.menuBox.textContent || "";</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>try{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>await navigator.clipboard.writeText(text);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>setStatus("Copiado al portapapeles âœ…", true);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>}catch{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const ta = document.createElement("textarea");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>ta.value = text;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>document.body.appendChild(ta);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>ta.select();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>document.execCommand("copy");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>document.body.removeChild(ta);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>setStatus("Copiado (modo compatibilidad) âœ…", true);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>}</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function downloadTxt(){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const text = els.menuBox.textContent || "";</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const blob = new Blob([text], {type: "text/plain;charset=utf-8"});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const url = URL.createObjectURL(blob);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const meta = currentTargetMeta();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>const a = document.createElement("a");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>a.href = url;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>a.download = `menu-${meta.year}-W${pad2(meta.week)}.txt`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>document.body.appendChild(a);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>a.click();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>document.body.removeChild(a);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>URL.revokeObjectURL(url);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>setStatus("Archivo .txt descargado âœ…", true);</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function resetAll(){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>localStorage.removeItem(STORAGE_KEY);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>setStatus("MenÃº guardado eliminado. Puedes generar uno nuevo.", true);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>ensureMenuLoaded();</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">// =====================</span></p>
<p class="p1"><span class="s1">//<span class="Apple-converted-space">Â  </span>Wire events</span></p>
<p class="p1"><span class="s1">// =====================</span></p>
<p class="p1"><span class="s1">els.btnGenerate.addEventListener("click", actionGenerateIfEmpty);</span></p>
<p class="p1"><span class="s1">els.btnRedoAll.addEventListener("click", actionRedoAll);</span></p>
<p class="p1"><span class="s1">els.btnRedoLM.addEventListener("click", () =&gt; actionRedoBlock("LM"));</span></p>
<p class="p1"><span class="s1">els.btnRedoMJ.addEventListener("click", () =&gt; actionRedoBlock("MJ"));</span></p>
<p class="p1"><span class="s1">els.btnRedoV.addEventListener("click",<span class="Apple-converted-space">Â  </span>() =&gt; actionRedoBlock("V"));</span></p>
<p class="p1"><span class="s1">els.btnCopy.addEventListener("click", copyToClipboard);</span></p>
<p class="p1"><span class="s1">els.btnDownload.addEventListener("click", downloadTxt);</span></p>
<p class="p1"><span class="s1">els.btnReset.addEventListener("click", resetAll);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">// =====================</span></p>
<p class="p1"><span class="s1">//<span class="Apple-converted-space">Â  </span>Init</span></p>
<p class="p1"><span class="s1">// =====================</span></p>
<p class="p1"><span class="s1">ensureMenuLoaded();</span></p>
<p class="p1"><span class="s1">&lt;/script&gt;</span></p>
<p class="p1"><span class="s1">&lt;/body&gt;</span></p>
<p class="p1"><span class="s1">&lt;/html&gt;</span></p>
</body>
</html>
